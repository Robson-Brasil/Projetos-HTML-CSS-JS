<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">
    <title>IoT - Automações</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="http://cdn.rawgit.com/Mikhus/canvas-gauges/gh-pages/download/2.1.7/all/gauge.min.js"></script>
    <meta name="author" content="Robson Brasil" />
    <meta
        name="keywords"
        content="iot, internet of things, internet das coisas, automação residencial, programação em C++, home assistant, esp32, alexa, google assistant"
    />
</head>

<body>
    <header>
        <img src="logo.png" alt="Logo">
        <h1>IoT - Automações</h1>
    </header>

    <div class="container">
        <div class="button-wrapper">
            
            <button class="button on" onclick="toggleButton(1)">On
                <input type="checkbox" onchange="toggleCheckbox(this)" id="23" />
            </button>
            <button class="button on" onclick="toggleButton(2)">On
                <input type="checkbox" onchange="toggleCheckbox(this)" id="22" />
            </button>
            <button class="button on" onclick="toggleButton(3)">On
                <input type="checkbox" onchange="toggleCheckbox(this)" id="21" />
            </button>
            <button class="button on" onclick="toggleButton(4)">On
                <input type="checkbox" onchange="toggleCheckbox(this)" id="5" />
            </button>
            <button class="button on" onclick="toggleButton(5)">On
                <input type="checkbox" onchange="toggleCheckbox(this)" id="26" />
            </button>
            <button class="button on" onclick="toggleButton(6)">On
                <input type="checkbox" onchange="toggleCheckbox(this)" id="18" />
            </button>
            <button class="button on" onclick="toggleButton(7)">On
                <input type="checkbox" onchange="toggleCheckbox(this)" id="19" />
            </button>
            <button class="button on" onclick="toggleButton(8)">On
                <input type="checkbox" onchange="toggleCheckbox(this)" id="25" />
            </button>
        </div>
    </div>

    <div class="content">
        <div class="card-grid">
        <div class="card">
            <p class="card-title">Temperatura</p>
            <canvas id="gauge-temperature"></canvas>
        </div>
        <div class="card">
            <p class="card-title">Umidade</p>
            <canvas id="gauge-humidity"></canvas>
        </div>
        </div>
    </div>
    <script src="script.js"></script>

    <button id="mode-toggle" class="light-mode" onclick="toggleMode()">
        <img id="mode-icon" src="sol.png">
    </button>
    </div>

    <footer>
        <p>Desenvolvido por: Robson Brasil</p>
    </footer>

    <script>
        function toggleButton(buttonNumber) {
            var button = document.getElementsByTagName("button")[buttonNumber - 1];
            if (button.classList.contains("on")) {
                button.classList.remove("on");
                button.classList.add("off");
                button.innerHTML = "Off";
            } else {
                button.classList.remove("off");
                button.classList.add("on");
                button.innerHTML = "On";
            }
        }

        function toggleMode() {
            var modeToggle = document.getElementById("mode-toggle");
            var modeIcon = document.getElementById("mode-icon");
            if (modeToggle.classList.contains("light-mode")) {
                modeToggle.classList.remove("light-mode");
                modeToggle.classList.add("dark-mode");
                modeIcon.src = "lua.png";
                document.body.style.backgroundColor = "black";
                document.body.style.color = "white";
            } else {
                modeToggle.classList.remove("dark-mode");
                modeToggle.classList.add("light-mode");
                modeIcon.src = "sol.png"; document.body.style.backgroundColor = "white";
                document.body.style.color = "black";
            }
        
        function toggleCheckbox(element) {
            var xhr = new XMLHttpRequest();
            if (element.checked) {
                xhr.open("GET", "/update?relay=" + element.id + "&state=1", true);
                } else {
                xhr.open("GET", "/update?relay=" + element.id + "&state=0", true);
            }
                xhr.send();
            }


        }
    </script>

</body>

</html>